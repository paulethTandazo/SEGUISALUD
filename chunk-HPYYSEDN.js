import{B as N,C as H,D as U,G as j,e as I,f as T,h as k,k as F,l as D,n as $,o as V,p as z,y as A}from"./chunk-YNM62QJP.js";import"./chunk-SK3Z2GDI.js";import"./chunk-QUJFQN2Y.js";import"./chunk-4JVC5FNE.js";import"./chunk-IH6E6YVF.js";import"./chunk-6Z6MJZ6J.js";import"./chunk-62QDCRAJ.js";import"./chunk-NWECPXNP.js";import"./chunk-I26NZKD3.js";import"./chunk-BMJVVMK5.js";import"./chunk-33R7V3D5.js";import"./chunk-I5OWKS3S.js";import"./chunk-SZ3K3J3X.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-3UBM7ASS.js";import"./chunk-CKP3SGE2.js";import"./chunk-KYKLHCVV.js";import{C as d,D as t,E as i,F as m,L as C,M as f,N as p,W as c,X as _,Y as P,ga as y,ha as S,j as h,k as b,ka as w,ma as E,q as M,r,t as O,v,z as g}from"./chunk-NRXC3TAV.js";import"./chunk-XIBDAHXH.js";import"./chunk-XOKKKZEN.js";import"./chunk-N6OJSQJW.js";import"./chunk-H3HFVQ5W.js";import"./chunk-GYLY2RJE.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-2R6CW7ES.js";function R(a,s){a&1&&(t(0,"div",12),m(1,"ion-spinner",13),i())}function q(a,s){if(a&1&&(t(0,"h3",14),c(1),i()),a&2){let o=p();r(),P(" Resultados (",o.farmacias.length,") ")}}function J(a,s){a&1&&m(0,"ion-icon",25)}function K(a,s){if(a&1){let o=C();t(0,"div",15)(1,"div",16),m(2,"img",17),i(),t(3,"div",18)(4,"h2"),c(5),i(),t(6,"p",19),c(7),i(),t(8,"div",20),g(9,J,1,0,"ion-icon",21),t(10,"span",22),c(11),i()()(),t(12,"div",23)(13,"ion-button",24),f("click",function(){let e=h(o).$implicit,l=p();return b(l.verDetalle(e))}),c(14," Ver "),i()()()}if(a&2){let o=s.$implicit,n=p();r(2),d("src",o.imagen,M),r(3),_(o.nombre),r(2),_(o.direccion),r(2),d("ngForOf",n.getEstrellas(o.rate)),r(2),_(o.rate)}}function Q(a,s){if(a&1){let o=C();t(0,"ion-content",29)(1,"div",30),m(2,"img",31),t(3,"h2"),c(4),i(),t(5,"p",32),c(6),i(),t(7,"ion-list",33)(8,"ion-item"),m(9,"ion-icon",34),t(10,"ion-label")(11,"h3"),c(12,"Horario"),i(),t(13,"p"),c(14,"8am a 9pm (Horarios var\xEDan en feriados)"),i()()(),t(15,"ion-item"),m(16,"ion-icon",35),t(17,"ion-label")(18,"h3"),c(19,"Tel\xE9fono"),i(),t(20,"p"),c(21,"188652165"),i()()()(),m(22,"br"),t(23,"ion-button",36),f("click",function(){h(o);let e=p(2);return b(e.comoLlegar())}),m(24,"ion-icon",37),c(25," C\xF3mo llegar (Google Maps) "),i()()()}if(a&2){let o=p(2);r(2),d("src",o.farmaciaSeleccionada.imagen,M),r(2),_(o.farmaciaSeleccionada.nombre),r(2),_(o.farmaciaSeleccionada.direccion)}}function W(a,s){if(a&1){let o=C();t(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),c(3,"Detalle de Farmacia"),i(),t(4,"ion-buttons",26)(5,"ion-button",27),f("click",function(){h(o);let e=p();return b(e.cerrarModal())}),c(6,"Cerrar"),i()()()(),g(7,Q,26,3,"ion-content",28)}if(a&2){let o=p();r(7),d("ngIf",o.farmaciaSeleccionada)}}var ie=(()=>{let s=class s{constructor(n){this.http=n,this.farmacias=[],this.cargando=!1,this.ubicacionActual=null,this.farmaciaSeleccionada=null,this.isModalOpen=!1}compartirUbicacion(){this.cargando=!0,this.farmacias=[],navigator.geolocation?navigator.geolocation.getCurrentPosition(n=>{this.ubicacionActual={lat:n.coords.latitude,lng:n.coords.longitude},this.buscarFarmaciasEnOpenStreet(this.ubicacionActual.lat,this.ubicacionActual.lng)},n=>{console.error("Error",n),this.cargando=!1,alert("Activa tu GPS para encontrar farmacias.")}):(alert("Navegador no soporta GPS."),this.cargando=!1)}buscarFarmaciasEnOpenStreet(n,e){let l=`
      [out:json][timeout:25];
      (
        node["amenity"="pharmacy"](around:10000,${n},${e});
        way["amenity"="pharmacy"](around:10000,${n},${e});
      );
      out center;
    `;this.http.post("https://overpass-api.de/api/interpreter",`data=${encodeURIComponent(l)}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).subscribe({next:x=>{this.procesarDatos(x.elements),this.cargando=!1},error:x=>{this.cargando=!1}})}procesarDatos(n){this.farmacias=n.map((e,l)=>{let u=e.tags.name||`Farmacia #${l+1}`,x=e.tags["addr:street"]?`${e.tags["addr:street"]} ${e.tags["addr:housenumber"]||""}`:"Ver ubicaci\xF3n en mapa",B=e.tags.opening_hours||"Horario no disponible",G=e.tags.phone||"No registrado",L=(Math.random()*(5-3.5)+3.5).toFixed(1);return{id:e.id,lat:e.lat||e.center.lat,lng:e.lon||e.center.lon,nombre:u,direccion:x,horario:B,telefono:G,rate:L,imagen:"https://cdn-icons-png.flaticon.com/512/3063/3063822.png"}}),this.farmacias.length===0&&alert("No se encontraron farmacias cerca.")}verDetalle(n){this.farmaciaSeleccionada=n,this.isModalOpen=!0}cerrarModal(){this.isModalOpen=!1}comoLlegar(){if(!this.farmaciaSeleccionada)return;let n=this.farmaciaSeleccionada.lat,e=this.farmaciaSeleccionada.lng,l=`https://www.google.com/maps/search/?api=1&query=${n},${e}`;window.open(l,"_system")}getEstrellas(n){return new Array(Math.floor(Number(n)))}};s.\u0275fac=function(e){return new(e||s)(O(E))},s.\u0275cmp=v({type:s,selectors:[["app-tab4"]],decls:17,vars:8,consts:[[1,"ion-no-border",3,"translucent"],[1,"header-title"],[1,"bg-light","ion-padding",3,"fullscreen"],[1,"location-box","ion-text-center"],[1,"loc-text"],["expand","block",1,"btn-location",3,"click","disabled"],["slot","start","name","navigate-circle-outline"],["class","ion-margin-top",4,"ngIf"],["class","section-title",4,"ngIf"],[1,"pharmacy-list"],["class","pharmacy-card",4,"ngFor","ngForOf"],[3,"didDismiss","isOpen"],[1,"ion-margin-top"],["name","crescent","color","primary"],[1,"section-title"],[1,"pharmacy-card"],[1,"card-img"],["alt","logo farmacia",3,"src"],[1,"card-info"],[1,"address"],[1,"rating-container"],["name","star","color","warning",4,"ngFor","ngForOf"],[1,"rate-number"],[1,"card-action"],["size","small","shape","round","color","primary",3,"click"],["name","star","color","warning"],["slot","end"],[3,"click"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[1,"modal-content","ion-text-center"],[2,"width","80px","margin-bottom","10px",3,"src"],[2,"color","#666","margin-bottom","20px"],["lines","none",1,"detail-list"],["name","time-outline","slot","start","color","medium"],["name","call-outline","slot","start","color","medium"],["expand","block","color","success",3,"click"],["name","map-outline","slot","start"]],template:function(e,l){e&1&&(t(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),c(3,"Farmacias GPS"),i()()(),t(4,"ion-content",2)(5,"div",3)(6,"p",4),c(7,"Encuentra medicamentos cerca de ti"),i(),t(8,"ion-button",5),f("click",function(){return l.compartirUbicacion()}),m(9,"ion-icon",6),c(10),i(),g(11,R,2,0,"div",7),i(),g(12,q,2,1,"h3",8),t(13,"div",9),g(14,K,15,5,"div",10),i(),t(15,"ion-modal",11),f("didDismiss",function(){return l.cerrarModal()}),g(16,W,8,1,"ng-template"),i()()),e&2&&(d("translucent",!0),r(4),d("fullscreen",!0),r(4),d("disabled",l.cargando),r(2),P(" ",l.cargando?"Buscando sat\xE9lite...":"Buscar cerca de M\xED"," "),r(),d("ngIf",l.cargando),r(),d("ngIf",l.farmacias.length>0),r(2),d("ngForOf",l.farmacias),r(),d("isOpen",l.isModalOpen))},dependencies:[j,I,T,k,F,D,$,V,z,A,N,H,U,w,y,S],styles:["ion-content[_ngcontent-%COMP%]{--background: #f8f9fa}.header-title[_ngcontent-%COMP%]{font-weight:700;color:#333}.location-box[_ngcontent-%COMP%]{margin-bottom:25px}.location-box[_ngcontent-%COMP%]   .loc-text[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-bottom:10px}.location-box[_ngcontent-%COMP%]   .btn-location[_ngcontent-%COMP%]{--border-radius: 12px;--background: #3880ff;--box-shadow: 0 4px 10px rgba(56, 128, 255, .3);font-weight:600;height:50px}.section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#333;margin-bottom:15px;padding-left:5px}.pharmacy-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:15px;margin-bottom:15px;display:flex;align-items:center;box-shadow:0 4px 12px #0000000a}.pharmacy-card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{width:60px;height:60px;background:#f0f4f8;border-radius:12px;padding:10px;margin-right:15px;display:flex;align-items:center;justify-content:center}.pharmacy-card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.pharmacy-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{flex:1}.pharmacy-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:700;color:#222}.pharmacy-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{margin:0 0 6px;font-size:12px;color:#888;line-height:1.3}.pharmacy-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .rating-container[_ngcontent-%COMP%]{display:flex;align-items:center}.pharmacy-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .rating-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px;margin-right:1px}.pharmacy-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .rating-container[_ngcontent-%COMP%]   .rate-number[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#666;margin-left:5px;background:#eee;padding:2px 6px;border-radius:4px}.pharmacy-card[_ngcontent-%COMP%]   .card-action[_ngcontent-%COMP%]{margin-left:10px}.pharmacy-card[_ngcontent-%COMP%]   .card-action[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-weight:600;--box-shadow: none;font-size:12px;width:80px}"]});let a=s;return a})();export{ie as Tab4Page};
