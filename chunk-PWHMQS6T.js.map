{
  "version": 3,
  "sources": ["src/app/services/data.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n// --- INTERFAZ MEDICAMENTO ---\r\n// Define la estructura obligatoria que debe tener cada medicina en el botiqu√≠n.\r\nexport interface Medicamento {\r\n  nombre: string;           // Ej: \"Paracetamol\"\r\n  cantidadInicial: number;  // Ej: 20 (Caja completa)\r\n  cantidadActual: number;   // Ej: 15 (Lo que queda)\r\n  progreso: number;         // Valor entre 0.0 y 1.0 para la barra visual\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root' // Esto hace que el servicio est√© disponible en toda la app\r\n})\r\nexport class DataService {\r\n\r\n  // ============================================================\r\n  // 1. FUENTES DE DATOS (Estado de la Aplicaci√≥n)\r\n  // Usamos BehaviorSubject para guardar datos en memoria y notificar cambios.\r\n  // ============================================================\r\n\r\n  // A. RECORDATORIOS (Agenda)\r\n  // Guarda la lista de tarjetas de colores del Tab 2.\r\n  private recordatoriosSubject = new BehaviorSubject<any[]>([]);\r\n  // Esta es la \"se√±al de radio\" p√∫blica a la que se suscriben los componentes.\r\n  recordatorios$ = this.recordatoriosSubject.asObservable();\r\n\r\n  // B. INVENTARIO (Botiqu√≠n)\r\n  // Guarda la lista de medicamentos del Tab 5.\r\n  // Iniciamos con datos de ejemplo para que la pantalla no se vea vac√≠a.\r\n  private medicamentosSubject = new BehaviorSubject<Medicamento[]>([\r\n    { nombre: 'Paracetamol', cantidadInicial: 20, cantidadActual: 15, progreso: 0.75 },\r\n    { nombre: 'Ibuprofeno', cantidadInicial: 10, cantidadActual: 8, progreso: 0.8 }\r\n  ]);\r\n  medicamentos$ = this.medicamentosSubject.asObservable();\r\n\r\n  // C. RACHAS (Gamificaci√≥n)\r\n  // Guarda el n√∫mero de dosis seguidas que ha tomado el usuario.\r\n  private rachaSubject = new BehaviorSubject<number>(0);\r\n  racha$ = this.rachaSubject.asObservable();\r\n\r\n  constructor() { }\r\n\r\n  // ============================================================\r\n  // 2. M√âTODOS PARA RECORDATORIOS (Agenda)\r\n  // ============================================================\r\n\r\n  // Agrega una nueva tarjeta a la lista de la agenda\r\n  agregarRecordatorio(nuevo: any) {\r\n    const actuales = this.recordatoriosSubject.value;\r\n    // Ponemos el nuevo al principio del array ([nuevo, ...viejos])\r\n    this.recordatoriosSubject.next([nuevo, ...actuales]);\r\n  }\r\n\r\n  // Elimina una tarjeta espec√≠fica basada en su ID √∫nico\r\n  eliminarRecordatorio(id: number) {\r\n    const actuales = this.recordatoriosSubject.value;\r\n    // Filtramos la lista para quitar el elemento que coincida con el ID\r\n    this.recordatoriosSubject.next(actuales.filter(item => item.id !== id));\r\n  }\r\n\r\n  // ============================================================\r\n  // 3. M√âTODOS PARA INVENTARIO (Botiqu√≠n)\r\n  // ============================================================\r\n\r\n  // Agrega un nuevo medicamento a la lista del Tab 5\r\n  agregarMedicamento(nuevo: Medicamento) {\r\n    const actuales = this.medicamentosSubject.value;\r\n    this.medicamentosSubject.next([nuevo, ...actuales]);\r\n  }\r\n\r\n  // L√≥gica Inteligente: Busca el medicamento por nombre y resta 1 unidad\r\n  descontarDosis(nombreMedicamento: string) {\r\n    // Recorremos la lista actual modificando solo el medicamento correcto\r\n    const listaActualizada = this.medicamentosSubject.value.map(med => {\r\n      // Si el nombre coincide Y todav√≠a quedan pastillas\r\n      if (med.nombre === nombreMedicamento && med.cantidadActual > 0) {\r\n        med.cantidadActual--; // Restamos 1\r\n        // Recalculamos el porcentaje para que la barra visual baje\r\n        med.progreso = med.cantidadActual / med.cantidadInicial; \r\n      }\r\n      return med; // Devolvemos el medicamento (ya sea modificado o igual)\r\n    });\r\n    \r\n    // Emitimos la nueva lista actualizada a toda la app\r\n    this.medicamentosSubject.next(listaActualizada);\r\n  }\r\n\r\n  // ============================================================\r\n  // 4. M√âTODOS DE GAMIFICACI√ìN (Rachas)\r\n  // ============================================================\r\n\r\n  // Aumenta el contador del fueguito üî• en el Dashboard\r\n  incrementarRacha() {\r\n    const valorActual = this.rachaSubject.value;\r\n    this.rachaSubject.next(valorActual + 1);\r\n  }\r\n}"],
  "mappings": ";;;;;;;;AAeM,IAAO,eAAP,MAAO,aAAW;EA2BtB,cAAA;AAlBQ,SAAA,uBAAuB,IAAI,gBAAuB,CAAA,CAAE;AAE5D,SAAA,iBAAiB,KAAK,qBAAqB,aAAY;AAK/C,SAAA,sBAAsB,IAAI,gBAA+B;MAC/D,EAAE,QAAQ,eAAe,iBAAiB,IAAI,gBAAgB,IAAI,UAAU,KAAI;MAChF,EAAE,QAAQ,cAAc,iBAAiB,IAAI,gBAAgB,GAAG,UAAU,IAAG;KAC9E;AACD,SAAA,gBAAgB,KAAK,oBAAoB,aAAY;AAI7C,SAAA,eAAe,IAAI,gBAAwB,CAAC;AACpD,SAAA,SAAS,KAAK,aAAa,aAAY;EAEvB;;;;;EAOhB,oBAAoB,OAAU;AAC5B,UAAM,WAAW,KAAK,qBAAqB;AAE3C,SAAK,qBAAqB,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC;EACrD;;EAGA,qBAAqB,IAAU;AAC7B,UAAM,WAAW,KAAK,qBAAqB;AAE3C,SAAK,qBAAqB,KAAK,SAAS,OAAO,UAAQ,KAAK,OAAO,EAAE,CAAC;EACxE;;;;;EAOA,mBAAmB,OAAkB;AACnC,UAAM,WAAW,KAAK,oBAAoB;AAC1C,SAAK,oBAAoB,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC;EACpD;;EAGA,eAAe,mBAAyB;AAEtC,UAAM,mBAAmB,KAAK,oBAAoB,MAAM,IAAI,SAAM;AAEhE,UAAI,IAAI,WAAW,qBAAqB,IAAI,iBAAiB,GAAG;AAC9D,YAAI;AAEJ,YAAI,WAAW,IAAI,iBAAiB,IAAI;MAC1C;AACA,aAAO;IACT,CAAC;AAGD,SAAK,oBAAoB,KAAK,gBAAgB;EAChD;;;;;EAOA,mBAAgB;AACd,UAAM,cAAc,KAAK,aAAa;AACtC,SAAK,aAAa,KAAK,cAAc,CAAC;EACxC;;;mCAlFW,cAAW;AAAA;;SAAX;EAAW,SAAX,aAAW;EAAA,YAFV;;;AAER,IAAO,cAAP;;sEAAO,aAAW,CAAA;UAHvB;WAAW;MACV,YAAY;;KACb;;;",
  "names": []
}
