{
  "version": 3,
  "sources": ["src/app/services/data.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n// Definimos la estructura de un Medicamento\r\nexport interface Medicamento {\r\n  nombre: string;\r\n  cantidadInicial: number;\r\n  cantidadActual: number;\r\n  progreso: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DataService {\r\n\r\n  // --- RECORDATORIOS ---\r\n  private recordatoriosSubject = new BehaviorSubject<any[]>([]);\r\n  recordatorios$ = this.recordatoriosSubject.asObservable();\r\n\r\n  // --- INVENTARIO (NUEVO) ---\r\n  private medicamentosSubject = new BehaviorSubject<Medicamento[]>([\r\n    // Datos de ejemplo para que no salga vacío al inicio\r\n    { nombre: 'Paracetamol', cantidadInicial: 20, cantidadActual: 15, progreso: 0.75 },\r\n    { nombre: 'Ibuprofeno', cantidadInicial: 10, cantidadActual: 8, progreso: 0.8 }\r\n  ]);\r\n  medicamentos$ = this.medicamentosSubject.asObservable();\r\n\r\n  constructor() { }\r\n\r\n  // --- LÓGICA RECORDATORIOS ---\r\n  agregarRecordatorio(nuevo: any) {\r\n    const actuales = this.recordatoriosSubject.value;\r\n    this.recordatoriosSubject.next([nuevo, ...actuales]);\r\n  }\r\n\r\n  eliminarRecordatorio(id: number) {\r\n    const actuales = this.recordatoriosSubject.value;\r\n    this.recordatoriosSubject.next(actuales.filter(item => item.id !== id));\r\n  }\r\n\r\n  // --- LÓGICA INVENTARIO ---\r\n  agregarMedicamento(nuevo: Medicamento) {\r\n    const actuales = this.medicamentosSubject.value;\r\n    this.medicamentosSubject.next([nuevo, ...actuales]);\r\n  }\r\n\r\n  // Esta función es la que hace la magia de descontar\r\n  descontarDosis(nombreMedicamento: string) {\r\n    const listaActualizada = this.medicamentosSubject.value.map(med => {\r\n      // Si encontramos el medicamento y aún quedan pastillas\r\n      if (med.nombre === nombreMedicamento && med.cantidadActual > 0) {\r\n        med.cantidadActual--; // Restamos 1\r\n        med.progreso = med.cantidadActual / med.cantidadInicial; // Actualizamos la barra\r\n      }\r\n      return med;\r\n    });\r\n    \r\n    // Guardamos la nueva lista actualizada\r\n    this.medicamentosSubject.next(listaActualizada);\r\n  }\r\n}"],
  "mappings": ";;;;;;;;AAcM,IAAO,eAAP,MAAO,aAAW;EActB,cAAA;AAXQ,SAAA,uBAAuB,IAAI,gBAAuB,CAAA,CAAE;AAC5D,SAAA,iBAAiB,KAAK,qBAAqB,aAAY;AAG/C,SAAA,sBAAsB,IAAI,gBAA+B;;MAE/D,EAAE,QAAQ,eAAe,iBAAiB,IAAI,gBAAgB,IAAI,UAAU,KAAI;MAChF,EAAE,QAAQ,cAAc,iBAAiB,IAAI,gBAAgB,GAAG,UAAU,IAAG;KAC9E;AACD,SAAA,gBAAgB,KAAK,oBAAoB,aAAY;EAErC;;EAGhB,oBAAoB,OAAU;AAC5B,UAAM,WAAW,KAAK,qBAAqB;AAC3C,SAAK,qBAAqB,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC;EACrD;EAEA,qBAAqB,IAAU;AAC7B,UAAM,WAAW,KAAK,qBAAqB;AAC3C,SAAK,qBAAqB,KAAK,SAAS,OAAO,UAAQ,KAAK,OAAO,EAAE,CAAC;EACxE;;EAGA,mBAAmB,OAAkB;AACnC,UAAM,WAAW,KAAK,oBAAoB;AAC1C,SAAK,oBAAoB,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC;EACpD;;EAGA,eAAe,mBAAyB;AACtC,UAAM,mBAAmB,KAAK,oBAAoB,MAAM,IAAI,SAAM;AAEhE,UAAI,IAAI,WAAW,qBAAqB,IAAI,iBAAiB,GAAG;AAC9D,YAAI;AACJ,YAAI,WAAW,IAAI,iBAAiB,IAAI;MAC1C;AACA,aAAO;IACT,CAAC;AAGD,SAAK,oBAAoB,KAAK,gBAAgB;EAChD;;;mCA9CW,cAAW;AAAA;gFAAX,cAAW,SAAX,aAAW,WAAA,YAFV,OAAM,CAAA;AAEd,IAAO,cAAP;;sEAAO,aAAW,CAAA;UAHvB;WAAW;MACV,YAAY;KACb;;;",
  "names": []
}
